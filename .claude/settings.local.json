{
  "permissions": {
    "allow": [
      "Bash(git mv:*)",
      "Bash(ls:*)",
      "Bash(__NEW_LINE_4d082337cd26ef42__ python3 << 'PYEOF'\nimport re\nimport os\nimport glob\n\ndocs_root = \"docs\"\n\n# Get all markdown files\nmd_files = glob.glob\\(f\"{docs_root}/**/*.md\", recursive=True\\)\n\ndef increment_prefix\\(match\\):\n    \"\"\"Increment the numeric prefix in a matched pattern.\"\"\"\n    num = int\\(match.group\\(1\\)\\)\n    rest = match.group\\(2\\)\n    return f\"{num + 1}{rest}\"\n\nfor filepath in sorted\\(md_files\\):\n    with open\\(filepath, 'r'\\) as f:\n        original = f.read\\(\\)\n    \n    content = original\n    \n    # ---- Pattern 1: Table row numbers \"| 0 |\" -> \"| 1 |\" etc. ----\n    # Only match the first column number in table rows like \"| 0 | [...\"\n    # Be careful: only match rows that look like numbered table entries\n    content = re.sub\\(\n        r'\\\\| \\(\\\\d+\\) \\\\| \\\\[',\n        lambda m: f'| {int\\(m.group\\(1\\)\\) + 1} | [',\n        content\n    \\)\n    # Also handle practice table \"| 1 | **...\" for 発展課題 - these are already 1-based, skip\n    # Actually the 発展課題 table also starts at 1 - but those were already 1-based! Check original.\n    # The original has \"| 1 | **プロジェクト完了...\" - those should become \"| 2 |\" etc. Wait, no.\n    # Looking at the original 5-practice/README.md, the 発展課題 numbers are 1-5 \\(already 1-based\\).\n    # But we incremented them above. Let me check if they should be incremented.\n    # Actually, looking at the original: the 発展課題 table starts at 1, not 0. So they should NOT be incremented.\n    # But our regex above would increment them because they match \"| 1 | **\".\n    # Wait, our regex requires \"[\" after the second \"|\": \"| 1 | [\" - and the 発展課題 rows have \"| 1 | **\"\n    # So they won't match! Good.\n    \n    # ---- Pattern 2: Markdown links to files ----\n    # Links like \\(0-setup/README.md\\) -> \\(1-setup/README.md\\)\n    # Links like \\(0-basic-select.md\\) -> \\(1-basic-select.md\\)\n    # Links like \\(../2-basic/README.md\\) -> \\(../3-basic/README.md\\)\n    # Match patterns like: \\(../X-name/...\\) or \\(X-name.md\\) or \\(X-name/...\\)\n    content = re.sub\\(\n        r'\\\\\\(\\(\\\\.\\\\./\\)?\\(\\\\d+\\)\\(-[a-z]\\)',\n        lambda m: f'\\({m.group\\(1\\) or \"\"}{int\\(m.group\\(2\\)\\) + 1}{m.group\\(3\\)}',\n        content\n    \\)\n    \n    # ---- Pattern 3: SQL path references ----\n    # Patterns like `sql/0-variables/0-declare-assign.sql`\n    # or [sql/0-department-report/0-department-report.sql]\\(sql/0-department-report/0-department-report.sql\\)\n    # Need to increment both directory number and file number\n    content = re.sub\\(\n        r'\\(sql/\\)\\(\\\\d+\\)\\(-[a-z]\\)',\n        lambda m: f'{m.group\\(1\\)}{int\\(m.group\\(2\\)\\) + 1}{m.group\\(3\\)}',\n        content\n    \\)\n    # Also for SQL files within dirs: /0-declare-assign.sql -> /1-declare-assign.sql\n    content = re.sub\\(\n        r'\\(/\\)\\(\\\\d+\\)\\(-[a-z][a-z0-9-]*\\\\.sql\\)',\n        lambda m: f'{m.group\\(1\\)}{int\\(m.group\\(2\\)\\) + 1}{m.group\\(3\\)}',\n        content\n    \\)\n    \n    # ---- Pattern 4: docs/ paths in setup README ----\n    # docs/0-setup/sql/0-definition.sql -> docs/1-setup/sql/1-definition.sql\n    content = re.sub\\(\n        r'\\(docs/\\)\\(\\\\d+\\)\\(-[a-z]\\)',\n        lambda m: f'{m.group\\(1\\)}{int\\(m.group\\(2\\)\\) + 1}{m.group\\(3\\)}',\n        content\n    \\)\n    \n    # ---- Pattern 5: Directory tree in main README ----\n    # Lines like \"├── 0-setup/\" -> \"├── 1-setup/\"\n    # Lines like \"├── 0-<トピック>.md\" -> \"├── 1-<トピック>.md\"\n    content = re.sub\\(\n        r'\\(├── |└── \\)\\(\\\\d+\\)\\(-\\)',\n        lambda m: f'{m.group\\(1\\)}{int\\(m.group\\(2\\)\\) + 1}{m.group\\(3\\)}',\n        content\n    \\)\n    \n    # ---- Pattern 6: \"セクション 2〜5\" -> \"セクション 3〜6\" in main README ----\n    content = content.replace\\('セクション 2〜5', 'セクション 3〜6'\\)\n    \n    if content != original:\n        with open\\(filepath, 'w'\\) as f:\n            f.write\\(content\\)\n        print\\(f\"Updated: {filepath}\"\\)\n    else:\n        print\\(f\"No changes: {filepath}\"\\)\n\nPYEOF)",
      "Bash(__NEW_LINE_31a282af2045ac79__ python3 << 'PYEOF'\nimport re\nimport glob\n\ndocs_root = \"docs\"\nmd_files = glob.glob\\(f\"{docs_root}/**/*.md\", recursive=True\\)\n\nfor filepath in sorted\\(md_files\\):\n    with open\\(filepath, 'r'\\) as f:\n        original = f.read\\(\\)\n    \n    content = original\n    \n    # Pattern 1: Section headings \"## 0. \" -> \"## 1. \", \"## 1. \" -> \"## 2. \", etc.\n    # Must be at start of line\n    content = re.sub\\(\n        r'^\\(## \\)\\(\\\\d+\\)\\(\\\\. \\)',\n        lambda m: f'{m.group\\(1\\)}{int\\(m.group\\(2\\)\\) + 1}{m.group\\(3\\)}',\n        content,\n        flags=re.MULTILINE\n    \\)\n    \n    # Pattern 2: Practice titles \"# 課題 0:\" -> \"# 課題 1:\", etc.\n    content = re.sub\\(\n        r'^\\(# 課題 \\)\\(\\\\d+\\)\\(:\\)',\n        lambda m: f'{m.group\\(1\\)}{int\\(m.group\\(2\\)\\) + 1}{m.group\\(3\\)}',\n        content,\n        flags=re.MULTILINE\n    \\)\n    \n    if content != original:\n        with open\\(filepath, 'w'\\) as f:\n            f.write\\(content\\)\n        print\\(f\"Updated: {filepath}\"\\)\n    else:\n        print\\(f\"No changes: {filepath}\"\\)\n\nPYEOF)",
      "Bash(cd:*)"
    ]
  }
}
